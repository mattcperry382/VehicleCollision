@*@page "/Pages/CollisionData" 

@using VehicleCollision.Models
@inherits OwningComponentBase<ICollisionRepository>
@{
}

<h1>Collisions</h1>

<table class="table table-responsive table-striped table-bordered">
    <thead class="thead-dark">
        <tr>
            <td>ID</td>
            <td>Date/Time</td>
            <td>Route</td>
            <td>Milepoint</td>
            <td>Location (lat/long)</td>
            <td>Road Name</td>
            <td>City</td>
            <td>County</td>
            <td>Crash Severity</td>
            <td>Tags</td>
        </tr>
    </thead>
    <tbody>
        @foreach (var c in Crashes)
        {
            <tr>
                <td>@c.crash_id</td>
                <td>@c.crash_datetime</td>
                <td>@c.route</td>
                <td>@c.milepoint</td>
                <td>@c.lat_utm_y, @c.long_utm_x</td>
                <td>@c.main_road_name</td>
                <td>@c.city</td>
                <td>@c.county_name</td>
                <td>@c.CrashSeverity.description</td>
                <td>
                    @if (c.work_zone_related)
                    {<p>Work-Zone Related</p>}
                    @if (c.pedestrian_involved)
                    {<p>Pedestrian Involved</p>}
                    @if (c.bicyclist_involved)
                    {<p>Bicyclist Involved</p>}
                    @if (c.motorcycle_involved)
                    {<p>Motorcycle Involved</p>}
                    @if (c.improper_restraint)
                    {<p>Improper Restraint</p>}
                    @if (c.unrestrained)
                    {<p>Unrestrained</p>}
                    @if (c.dui)
                    {<p>DUI</p>}
                    @if (c.intersection_related)
                    {<p>Intersection Related</p>}
                    @if (c.wild_animal_related)
                    {<p>Wild Animal Related</p>}
                    @if (c.domestic_animal_related)
                    {<p>Domestic Animal Related</p>}
                    @if (c.overturn_rollover)
                    {<p>Overturn Rollover</p>}
                    @if (c.commercial_motor_veh_involved)
                    {<p>Commercial Motor Vehicle Involved</p>}
                    @if (c.teenage_driver_involved)
                    {<p>TeenageDriverInvolved</p>}
                    @if (c.older_driver_involved)
                    {<p>Older Driver Involving</p>}
                    @if (c.night_dark_condition)
                    {<p>Night Dark Condition</p>}
                    @if (c.single_vehicle)
                    {<p>Single Vehicle</p>}
                    @if (c.distracted_driving)
                    {<p>Distracted Driving</p>}
                    @if (c.drowsy_driving)
                    {<p>Drowsy Driving</p>}
                    @if (c.roadway_departure)
                    {<p>Roadway Departure</p>}
                </td>
            </tr>
        }
    </tbody>
</table>


@code {
    public ICollisionRepository repo=> Service;

    public IEnumerable<Crash> Crashes { get; set; }

    protected async override Task OnInitializedAsync()
    {

        await UpdateData();
    }

    public async Task UpdateData()
    {
        //Crashes = await repo.Crashes
        //.inlucde
        //.ToListAsync();
    }

    //public async Task DeleteAppointment(Appointment a)
    //{


    //    var timeSlot = repo.TimeSlots.FirstOrDefault(x => x.TimeSlotId == a.TimeSlotId);
    //    timeSlot.Taken = false;
    //    repo.DeleteAppoint(a);
    //    await UpdateData();
    //}

    //public string GetEditUrl(long id) => $"/appointments/appointments/appointedit/{id}";

}*@